<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Календар Завдань</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFFFF;
            color: #1f2937;
        }
        /* Кастомний скролбар для чату */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #2d2d2d;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #f97316;
            border-radius: 2px;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(0, 1fr));
            gap: 1px;
            background-color: #e5e7eb; /* Змінено на світло-сірий */
            border: 1px solid #e5e7eb; /* Змінено на світло-сірий */
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .calendar-day {
            background-color: #FFFFFF;
            transition: background-color 0.3s;
        }
        .calendar-day:hover {
            background-color: #f3f4f6;
        }
        .day-header {
             background-color: #FFFFFF;
        }
    </style>
</head>
<body class="antialiased">

    <div class="p-4 md:p-8 min-h-screen">
        <!-- Заголовок -->
        <header class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-4">
                <h1 id="current-month" class="text-2xl md:text-3xl font-bold text-black">Вересень 2025</h1>
                <div class="flex items-center gap-2">
                    <button id="prev-month" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                    <button id="next-month" class="p-2 rounded-full hover:bg-gray-200 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>
            </div>
            <button id="today-btn" class="px-4 py-2 text-sm font-semibold bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">Сьогодні</button>
        </header>

        <!-- Календар -->
        <main>
            <div class="calendar-grid">
                <!-- Заголовки днів тижня -->
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Нд</div>
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Пн</div>
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Вт</div>
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Ср</div>
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Чт</div>
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Пт</div>
                <div class="day-header p-3 text-center text-xs font-semibold uppercase text-gray-500">Сб</div>

                <!-- Дні календаря (будуть заповнені JS) -->
            </div>
        </main>
    </div>

    <!-- Кнопка "Додати завдання" -->
    <button id="open-modal-btn" class="fixed bottom-8 right-8 w-14 h-14 bg-orange-600 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-orange-700 transition-transform hover:scale-110">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
    </button>

    <!-- Міні-чат -->
    <div class="fixed top-8 right-8 w-80">
        <button id="chat-toggle" class="w-full text-left px-4 py-2 bg-orange-600 text-white font-semibold rounded-t-lg flex justify-between items-center">
            <span>Командний чат</span>
            <svg id="chat-arrow" class="w-5 h-5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </button>
        <div id="chat-body" class="bg-orange-50 rounded-b-lg shadow-xl overflow-hidden transition-all duration-300 max-h-96">
            <div id="chat-messages" class="p-4 h-64 overflow-y-auto custom-scrollbar space-y-4">
                <!-- Повідомлення будуть додані JS -->
            </div>
            <div class="p-2 border-t border-orange-200">
                <input type="text" placeholder="Написати повідомлення..." class="w-full bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500">
            </div>
        </div>
    </div>
    
    <!-- Модальне вікно "Додати завдання" -->
    <div id="task-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-black">Створити нове завдання</h2>
                <button id="close-modal-btn" class="text-gray-500 hover:text-black">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <form>
                <div class="mb-4">
                    <label for="task-name" class="block text-sm font-medium text-gray-700 mb-1">Назва завдання</label>
                    <input type="text" id="task-name" class="w-full bg-gray-50 border border-gray-300 rounded-md py-2 px-3 text-sm text-black focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Наприклад, підготувати презентацію">
                </div>
                <div class="mb-4">
                    <label for="task-date" class="block text-sm font-medium text-gray-700 mb-1">Дата</label>
                    <input type="date" id="task-date" class="w-full bg-gray-50 border border-gray-300 rounded-md py-2 px-3 text-sm text-black" value="2025-09-17">
                </div>
                <div class="mb-6">
                    <label for="task-desc" class="block text-sm font-medium text-gray-700 mb-1">Опис</label>
                    <textarea id="task-desc" rows="3" class="w-full bg-gray-50 border border-gray-300 rounded-md py-2 px-3 text-sm text-black focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Додайте деталі..."></textarea>
                </div>
                <div class="flex justify-end gap-3">
                    <button type="button" class="px-4 py-2 text-sm font-semibold bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors">Скасувати</button>
                    <button type="submit" class="px-4 py-2 text-sm font-semibold bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors">Створити</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA ---
            // Зразок завдань (ключ у форматі YYYY-MM-DD)
            const tasks = {
                '2025-09-03': [{ title: 'Резерв студії для запису', color: 'bg-green-500' }],
                '2025-09-05': [{ title: 'Репетиція', time: '17:00-19:00', color: 'bg-orange-500' }],
                '2025-09-07': [{ title: 'Зустріч з менеджером', time: '10:00', color: 'bg-blue-500' }],
                '2025-09-08': [{ title: 'Індивідуальна практика', color: 'bg-purple-500' }],
                '2025-09-15': [
                    { title: 'Забронкувати реліз', time: '12:00', color: 'bg-blue-500' },
                    { title: 'Репетиція', time: '16:00-18:00', color: 'bg-orange-500' }
                ],
                '2025-09-19': [{ title: 'Студійний запис', time: '10:00 - 16:00', color: 'bg-red-500' }],
                '2025-09-28': [{ title: 'Виступ у клубі "Атлас"', time: '20:00', color: 'bg-pink-500' }],
            };

            // Зразок повідомлень для чату
            const chatMessagesData = [
                { user: 'Олена', text: 'Привіт! Як справи з репетицією?', time: '14:30', avatar: 'https://placehold.co/40x40/f97316/white?text=О' },
                { user: 'Іван', text: 'Все добре, завершуємо. Ти встигаєш на 17:00?', time: '14:32', avatar: 'https://placehold.co/40x40/3b82f6/white?text=І' },
                { user: 'Марія', text: 'Так, я вже в дорозі. Буду за 15 хвилин.', time: '14:35', avatar: 'https://placehold.co/40x40/8b5cf6/white?text=М' }
            ];

            // --- UI елементи ---
            const calendarGrid = document.querySelector('.calendar-grid');
            const currentMonthEl = document.getElementById('current-month');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const todayBtn = document.getElementById('today-btn');

            // --- Модальне вікно ---
            const modal = document.getElementById('task-modal');
            const openModalBtn = document.getElementById('open-modal-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');

            // --- Чат ---
            const chatToggle = document.getElementById('chat-toggle');
            const chatBody = document.getElementById('chat-body');
            const chatArrow = document.getElementById('chat-arrow');
            const chatMessagesContainer = document.getElementById('chat-messages');

            // --- Стан ---
            let currentDate = new Date(2025, 8, 1); // Вересень 2025

            // --- Функції ---
            function renderCalendar() {
                // Очищення попереднього календаря
                const dayHeaders = calendarGrid.querySelectorAll('.day-header');
                calendarGrid.innerHTML = '';
                dayHeaders.forEach(header => calendarGrid.appendChild(header));


                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                
                currentMonthEl.textContent = `${new Intl.DateTimeFormat('uk-UA', { month: 'long' }).format(currentDate)} ${year}`;
                
                const firstDayOfMonth = new Date(year, month, 1).getDay();
                const lastDateOfMonth = new Date(year, month + 1, 0).getDate();
                const lastDayOfMonth = new Date(year, month, lastDateOfMonth).getDay();
                const lastDateOfLastMonth = new Date(year, month, 0).getDate();
                const today = new Date();
                
                for (let i = firstDayOfMonth; i > 0; i--) {
                    const day = lastDateOfLastMonth - i + 1;
                    calendarGrid.insertAdjacentHTML('beforeend', `
                        <div class="calendar-day p-2 text-gray-400 min-h-[120px]">
                            <span class="text-sm">${day}</span>
                        </div>
                    `);
                }
                
                for (let i = 1; i <= lastDateOfMonth; i++) {
                    let isToday = i === today.getDate() && month === today.getMonth() && year === today.getFullYear()
                        ? 'border-2 border-orange-500' : '';
                    let dayNumberStyle = isToday ? 'bg-orange-500 text-white rounded-full w-7 h-7 flex items-center justify-center' : '';

                    let dayEl = document.createElement('div');
                    dayEl.className = `calendar-day relative p-2 min-h-[120px] md:min-h-[140px] flex flex-col ${isToday}`;
                    dayEl.innerHTML = `<span class="text-sm font-semibold mb-2 ${dayNumberStyle}">${i}</span><div class="space-y-1 overflow-y-auto custom-scrollbar flex-grow"></div>`;
                    
                    const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                    if (tasks[dateKey]) {
                        const tasksContainer = dayEl.querySelector('.space-y-1');
                        tasks[dateKey].forEach(task => {
                            tasksContainer.innerHTML += `
                                <div class="text-xs p-1.5 rounded-md flex items-center gap-2 ${task.color} text-white truncate">
                                    <div class="w-2 h-2 rounded-full bg-white/50"></div>
                                    <span>${task.title}</span>
                                </div>
                            `;
                        });
                    }

                    calendarGrid.appendChild(dayEl);
                }

                // Додавання днів наступного місяця
                for (let i = lastDayOfMonth; i < 6; i++) {
                    const day = i - lastDayOfMonth + 1;
                    calendarGrid.insertAdjacentHTML('beforeend', `
                        <div class="calendar-day p-2 text-gray-400 min-h-[120px]">
                            <span class="text-sm">${day}</span>
                        </div>
                    `);
                }
            }

            function renderChat() {
                chatMessagesContainer.innerHTML = '';
                chatMessagesData.forEach(msg => {
                    chatMessagesContainer.innerHTML += `
                        <div class="flex items-start gap-2.5">
                            <img class="w-8 h-8 rounded-full" src="${msg.avatar}" alt="${msg.user} avatar">
                            <div class="flex flex-col w-full max-w-[320px] leading-1.5 p-3 border-gray-200 bg-white rounded-e-xl rounded-es-xl">
                                <div class="flex items-center space-x-2 rtl:space-x-reverse mb-1">
                                    <span class="text-sm font-semibold text-gray-900">${msg.user}</span>
                                    <span class="text-xs font-normal text-gray-500">${msg.time}</span>
                                </div>
                                <p class="text-sm font-normal text-gray-800">${msg.text}</p>
                            </div>
                        </div>
                    `;
                });
            }


            // --- Обробники подій ---
            prevMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });

            nextMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });

            todayBtn.addEventListener('click', () => {
                currentDate = new Date();
                renderCalendar();
            });
            
            // Модальне вікно
            openModalBtn.addEventListener('click', () => modal.classList.remove('hidden'));
            closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });

            // Чат
            chatToggle.addEventListener('click', () => {
                chatBody.classList.toggle('max-h-96');
                chatBody.classList.toggle('max-h-0');
                chatArrow.classList.toggle('rotate-180');
            });


            // --- Ініціалізація ---
            renderCalendar();
            renderChat();
        });
    </script>
</body>
</html>

